<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SarveySafari - discussion title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.snow.css" />
    <link rel="stylesheet" href="../assets/css/basic.css">
</head>

<body id="discussion">
    <div id="loading-screen">
        <div class="loading-container">
            <p>
                <span class="emoji">ðŸŽ‰</span>
                <span class="emoji">ðŸš€</span>
                <span class="emoji">âœ¨</span>
            </p>
            <div class="loading-bar">
                <div class="loading-progress"></div>
                <p>......................................................</p>
            </div>
        </div>
    </div>
    
    <div id="navbar"></div>

    <div class="mt-5 pt-5"></div>

    <main>
        <div class="container mt-4">
            <div class="row">
                <div class="col-lg-8">
                    <div class="card mb-3" style="background-color: #79AC78;">
                        <div class="card-header">
                            <div class="d-flex justify-content-between">
                                <h4><i class="bi bi-chat-left-text h4 px-2"></i> Special title treatment</h4>
                                <h4><i class="bi bi-people-fill"></i> 123</h4>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-right gap-3">
                                <p class="tag p-1">AI</p>
                                <p class="tag p-1">Opinion</p>
                                <p class="tag p-1">Prediction</p>
                            </div>
                            <p>In the upcoming decade, AI is poised to revolutionize various industries by enhancing
                                automation, decision-making, and personalization. From healthcare advancements to
                                climate change solutions, the potential applications of AI are vast and transformative.
                            </p>
                            <p class="text-sm mb-0 pb-0"><span class="op-6">Posted</span> <a class="text-success"
                                    href="#">54 minutes</a> <span class="op-6">ago by</span> <a class="text-success"
                                    href="#">DanielD</a></p>
                            <div class="gap-2 text-end">
                                <a href="#" class="btn btn-sm btn-outline-success" data-bs-toggle="modal"
                                    data-bs-target="#editDiscussionModal" data-id="1"
                                    data-title="Special title treatment"
                                    data-content="In the upcoming decade, AI is poised to revolutionize various industries by enhancing automation, decision-making, and personalization. From healthcare advancements to climate change solutions, the potential applications of AI are vast and transformative."
                                    data-tags="AI,Opinion,Prediction">
                                    <i class="bi bi-pencil-square"></i> edit
                                </a>
                                <a href="#" class="btn btn-sm btn-outline-success">delete</a>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex justify-content-between">
                        <h3><i class="bi bi-chat-text"></i> 2 Comments</h3>
                        <a href="#" class="btn btn-md btn-success shadow-lg" data-bs-toggle="modal"
                            data-bs-target="#commentModal">Comment</a>
                    </div>
                    <hr class="mb-2 pb-2">

                    <div class="card mb-3 p-2" style="background-color: #79AC78;">
                        <div class="card-body">
                            <div class="text-end py-1">
                                <small><a href="" class="btn btn-sm btn-outline-success mx-2" data-bs-toggle="modal"
                                        data-bs-target="#commentModal" data-bs-action="edit"
                                        data-bs-comment="I don't have all the details, but I know the mentors report community concerns and elevate them to the person who can push them up to the people who can actually solve issues. If you don't trust the information you have received that is fine, contact Sololearn directly. After all, you're right, this is a volunteer service, and the mentors do their best to help, Please show appreciation of their efforts."
                                        data-bs-comment-id="1"><i class="bi bi-pencil-square"></i> edit</a><a href=""
                                        class="btn btn-sm btn-outline-success">delete</a></small>
                            </div>
                            <p>
                                <strong>Ð•Ð²Ð³ÐµÐ½Ð¸Ð¹</strong> I don't have all the details, but I know the mentors report
                                community concerns and elevate them to the person who can push them up to the people who
                                can
                                actually solve issues. If you don't trust the information you have received that is
                                fine,
                                contact Sololearn directly. After all, you're right, this is a volunteer service, and
                                the
                                mentors do their best to help, Please show appreciation of their efforts.
                            </p>
                        </div>
                        <div class="d-flex justify-content-between px-2">
                            <h6 class="text-start px-2"><a href="#"><i class="bi bi-hand-thumbs-up"></i></a> 10</h6>
                            <small><span class="text-muted text-end px-2">4th Jul 2024, 5:01 PM by <a href=""
                                        class="text-success">Chris Coder</a></span></small>
                        </div>
                    </div>

                    <div class="card mb-3 p-2" style="background-color: #79AC78;">
                        <div class="card-body">
                            <p>
                                <strong>Ð•Ð²Ð³ÐµÐ½Ð¸Ð¹</strong> I don't have all the details, but I know the mentors report
                                community concerns and elevate them to the person who can push them up to the people who
                                can
                                actually solve issues. If you don't trust the information you have received that is
                                fine,
                                contact Sololearn directly. After all, you're right, this is a volunteer service, and
                                the
                                mentors do their best to help, Please show appreciation of their efforts.
                            </p>
                        </div>
                        <div class="d-flex justify-content-between px-2">
                            <h6 class="text-start px-2"><a href="#"><i class="bi bi-hand-thumbs-up-fill"></i></a> 10
                            </h6>
                            <small><span class="text-muted text-end px-2">4th Jul 2024, 5:01 PM by <a href=""
                                        class="text-success">Chris Coder</a></span></small>
                        </div>
                    </div>

                    <div class="text-center">
                        <a href="" class="btn btn-lg btn-success" data-bs-toggle="modal"
                            data-bs-target="#commentModal">Comment</a>
                    </div>
                </div>
                <div class="col-lg-4 mb-5 pb-5">
                    <div class="sidebar card d-none d-md-block" style="background-color: #79AC78;">
                        <div class="card-header">
                            <h4><i class="bi bi-card-list"></i> Similar Discussion</h4>
                        </div>
                        <div class="card-body">
                            <div class="sidebar-item">
                                <a href="#"><i class="bi bi-chat-left-text px-2"></i> Is it possible to change the
                                    default rounding method in Python?</a>
                                <small class="text-success"><i class="bi bi-people-fill"></i> 123</small>
                                <hr>
                            </div>
                            <div class="sidebar-item">
                                <a href="#"><i class="bi bi-chat-left-text px-2"></i> How to create your own Python
                                    Codes?</a>
                                <small class="text-success"><i class="bi bi-people-fill"></i> 123</small>
                                <hr>
                            </div>
                            <div class="sidebar-item">
                                <a href="#"><i class="bi bi-chat-left-text px-2"></i> Is it possible to change the
                                    default rounding method in Python?</a>
                                <small class="text-success"><i class="bi bi-people-fill"></i> 123</small>
                                <hr>
                            </div>
                            <div class="sidebar-item">
                                <a href="#"><i class="bi bi-chat-left-text px-2"></i> How to create your own Python
                                    Codes?</a>
                                <small class="text-success"><i class="bi bi-people-fill"></i> 123</small>
                                <hr>
                            </div>
                            <div class="sidebar-item">
                                <a href="#"><i class="bi bi-chat-left-text px-2"></i> Is it possible to change the
                                    default rounding method in Python?</a>
                                <small class="text-success"><i class="bi bi-people-fill"></i> 123</small>
                                <hr>
                            </div>
                            <div class="sidebar-item">
                                <a href="#"><i class="bi bi-chat-left-text px-2"></i> How to create your own Python
                                    Codes?</a>
                                <small class="text-success"><i class="bi bi-people-fill"></i> 123</small>
                                <hr>
                            </div>
                            <div class="sidebar-item">
                                <a href="#"><i class="bi bi-chat-left-text px-2"></i> Is it possible to change the
                                    default rounding method in Python?</a>
                                <small class="text-success"><i class="bi bi-people-fill"></i> 123</small>
                                <hr>
                            </div>
                            <div class="sidebar-item">
                                <a href="#"><i class="bi bi-chat-left-text px-2"></i> How to create your own Python
                                    Codes?</a>
                                <small class="text-success"><i class="bi bi-people-fill"></i> 123</small>
                                <hr>
                            </div>
                            <div class="sidebar-item">
                                <a href="#"><i class="bi bi-chat-left-text px-2"></i> Is it possible to change the
                                    default rounding method in Python?</a>
                                <small class="text-success"><i class="bi bi-people-fill"></i> 123</small>
                                <hr>
                            </div>
                            <div class="sidebar-item">
                                <a href="#"><i class="bi bi-chat-left-text px-2"></i> How to create your own Python
                                    Codes?</a>
                                <small class="text-success"><i class="bi bi-people-fill"></i> 123</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal Structure -->
    <div class="modal fade" id="commentModal" tabindex="-1" aria-labelledby="commentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="background-color: #79AC78;">
                <div class="modal-header">
                    <h5 class="modal-title" id="commentModalLabel">New Comment</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="commentForm">
                        <input type="hidden" id="commentId">
                        <div class="mb-3">
                            <label for="commentText" class="form-label">Comment</label>
                            <div id="comment_editor" style="min-height: 200px; background-color: aliceblue;"></div>
                        </div>
                        <button type="submit" class="btn btn-success">Save</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal to Edit Discussion -->
    <div class="modal fade" id="editDiscussionModal" tabindex="-1" aria-labelledby="editDiscussionModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="background-color: #79AC78;">
                <div class="modal-header">
                    <h5 class="modal-title" id="editDiscussionModalLabel">Edit Discussion</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editDiscussionForm">
                        <input type="hidden" id="discussionId">
                        <div class="mb-3">
                            <label for="discussionTitle" class="form-label">Title</label>
                            <input type="text" class="form-control" id="discussionTitle" required>
                        </div>
                        <div class="mb-3" id="discussion_editor"
                            style="min-height: 300px !important; background-color: aliceblue;">
                            <label for="discussionContent" class="form-label">Content</label>
                            <textarea class="form-control" id="discussionContent" rows="5" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="discussionTags" class="form-label">Tags</label>
                            <select class="form-control" id="discussionTags" multiple>
                                <!-- Replace these options with dynamic tags from your database or server -->
                                <option value="AI">AI</option>
                                <option value="Opinion">Opinion</option>
                                <option value="Prediction">Prediction</option>
                                <option value="Technology">Technology</option>
                                <option value="Science">Science</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-success">Save Changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <footer></footer>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.js"></script>
    <script type="module" src="../assets/js/app.js"></script>
    <script type="module" src="../assets/js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            // Initialize Quill editors
            const quill = new Quill('#comment_editor', {
                theme: 'snow'
            });

            const quil2 = new Quill('#discussion_editor', {
                theme: 'snow'
            });

            // Handle comment modal show event
            const commentModal = document.getElementById('commentModal');
            commentModal.addEventListener('show.bs.modal', function (event) {
                const button = event.relatedTarget;
                const action = button.getAttribute('data-bs-action');
                const comment = button.getAttribute('data-bs-comment');
                const commentId = button.getAttribute('data-bs-comment-id');

                const modalTitle = commentModal.querySelector('.modal-title');
                const commentIdInput = commentModal.querySelector('#commentId');

                if (action === 'edit') {
                    modalTitle.textContent = 'Edit Comment';
                    commentIdInput.value = commentId;

                    // Set the content in the Quill editor
                    quill.root.innerHTML = comment;
                } else {
                    modalTitle.textContent = 'New Comment';
                    commentIdInput.value = '';

                    // Clear the Quill editor content
                    quill.root.innerHTML = '';
                }
            });

            // Handle comment form submission
            const commentForm = document.getElementById('commentForm');
            commentForm.addEventListener('submit', function (event) {
                event.preventDefault();
                const commentContent = quill.root.innerHTML;
                const commentId = document.getElementById('commentId').value;

                if (commentId) {
                    console.log(`Updating comment ID ${commentId} with text: ${commentContent}`);
                } else {
                    console.log(`Creating new comment with text: ${commentContent}`);
                }

                const commentModalInstance = bootstrap.Modal.getInstance(commentModal);
                commentModalInstance.hide();
            });

            // Handle discussion modal show event
            const editDiscussionModal = document.getElementById('editDiscussionModal');
            editDiscussionModal.addEventListener('show.bs.modal', function (event) {
                const button = event.relatedTarget;

                const discussionId = button.getAttribute('data-id');
                const title = button.getAttribute('data-title');
                const content = button.getAttribute('data-content');
                const tags = button.getAttribute('data-tags').split(',');

                const modalTitle = editDiscussionModal.querySelector('.modal-title');
                const modalBodyInput = editDiscussionModal.querySelector('.modal-body input#discussionTitle');
                const modalBodyTextarea = editDiscussionModal.querySelector('.modal-body textarea#discussionContent');
                const modalBodyTags = editDiscussionModal.querySelector('.modal-body select#discussionTags');

                document.getElementById('discussionId').value = discussionId;
                modalBodyInput.value = title;

                // Set Quill content for discussion editor
                quil2.root.innerHTML = content;

                for (let i = 0; i < modalBodyTags.options.length; i++) {
                    modalBodyTags.options[i].selected = tags.includes(modalBodyTags.options[i].value);
                }
            });

            // Handle discussion form submission
            document.getElementById('editDiscussionForm').addEventListener('submit', function (event) {
                event.preventDefault();

                const discussionId = document.getElementById('discussionId').value;
                const title = document.getElementById('discussionTitle').value;
                const content = quil2.root.innerHTML; // Get content from Quill editor

                const tagsSelect = document.getElementById('discussionTags');
                const selectedTags = Array.from(tagsSelect.options)
                    .filter(option => option.selected)
                    .map(option => option.value);

                console.log('Discussion ID:', discussionId);
                console.log('Title:', title);
                console.log('Content:', content);
                console.log('Tags:', selectedTags.join(', '));

                const myModal = bootstrap.Modal.getInstance(editDiscussionModal);
                myModal.hide();
            });
        });
    </script>
</body>

</html>